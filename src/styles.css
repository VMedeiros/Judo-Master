/* Import de fontes para seleção (deve vir antes de qualquer regra) */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600&family=Noto+Serif+JP:wght@400;600&family=Roboto+Mono:wght@400;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Variáveis de tema base (Estilo Japonês: Branco & Vermelho) */
:root[data-theme='light'] {
  /* Base viva e acessível */
  --color-bg: #ffffff;
  --color-bg-alt: #f3f4f6;    /* Gray 100 para contraste nas cards */
  --color-text: #0b1220;      /* Mais escuro que Gray 900 */
  --color-text-muted: #374151;/* Gray 700 para melhor leitura */
  --color-border: #d1d5db;    /* Gray 300 mais visível */

  /* Accent vermelho japonês com alto contraste */
  --color-accent: #c8102e;    /* Japan Red */
  --color-accent-alt: #a10d24;

  /* Secundário (branco & vermelho suave) */
  --secondary-bg: #ffffff;
  --secondary-border: #eaeaea;
  --secondary-accent: #e00022; /* vermelho secundário mais vivo */
  --secondary-accent-alt: #bb001c;

  /* Suporte */
  --success: #16a34a;
  --warning: #f59e0b;
  --danger: #dc2626;
}

:root[data-theme='dark'] {
  /* Base escura com contraste elevado */
  --color-bg: #0f141a;
  --color-bg-alt: #17202a;
  --color-text: #f3f4f6;
  --color-text-muted: #d1d5db;
  --color-border: #25303a;

  /* Accent adaptado para escuro */
  --color-accent: #ff3347;
  --color-accent-alt: #e3263a;

  /* Secundário adaptado ao dark */
  --secondary-bg: #1a2027;
  --secondary-border: #2a333d;
  --secondary-accent: #ff4050;
  --secondary-accent-alt: #e83343;

  /* Suporte */
  --success: #22c55e;
  --warning: #f59e0b;
  --danger: #ef4444;
}

html, body {
  background-color: var(--color-bg);
  color: var(--color-text);
  position: relative;
  overflow-x: hidden;
}

/* Background decorativo melhorado com tema japonês */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  background-color: var(--color-bg);
}

/* Tema claro: padrão sutil com vermelho japonês */
:root[data-theme='light'] body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  background: 
    radial-gradient(ellipse 800px 600px at 20% 10%, rgba(200, 16, 46, 0.05) 0%, transparent 60%),
    radial-gradient(ellipse 600px 500px at 80% 90%, rgba(200, 16, 46, 0.03) 0%, transparent 70%),
    linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(243, 244, 246, 1) 100%);
}

/* Tema escuro: tons mais sofisticados */
:root[data-theme='dark'] body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  background:
    radial-gradient(ellipse 900px 700px at 15% 15%, rgba(255, 51, 71, 0.08) 0%, transparent 65%),
    radial-gradient(ellipse 700px 600px at 85% 85%, rgba(255, 51, 71, 0.05) 0%, transparent 70%),
    linear-gradient(135deg, rgba(15, 20, 26, 1) 0%, rgba(23, 32, 42, 1) 100%);
}

/* garantir que o corpo herda a fonte aplicada no html */
body { font-family: inherit; }

/* Font family helpers */
.font-sans { font-family: 'Noto Sans', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
.font-serif { font-family: 'Noto Serif JP', ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif; }
.font-mono { font-family: 'Roboto Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }

/* Utilidades complementares */
.border-theme { border-color: var(--color-border); }
.bg-theme { background-color: var(--color-bg); }
.bg-theme-alt { background-color: var(--color-bg-alt); }
.text-theme { color: var(--color-text); }
.accent-text { color: var(--color-accent); }
.accent-bg { background-color: var(--color-accent); }
.accent-bg:hover { background-color: var(--color-accent-alt); }

/* Temas secundários focados no claro (branco & vermelho) */
.secondary-card {
  background-color: var(--secondary-bg);
  border: 1px solid var(--secondary-border);
  border-radius: 0.75rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
}
.btn-secondary {
  background-color: var(--secondary-accent);
  color: #fff;
  border-color: var(--secondary-accent);
}
.btn-secondary:hover { background-color: var(--secondary-accent-alt); }
.pill-secondary-active {
  background-color: color-mix(in oklab, var(--secondary-accent) 10%, var(--secondary-bg));
  border: 1px solid color-mix(in oklab, var(--secondary-accent) 35%, var(--secondary-border));
}

/* Suave transição entre temas */
html { transition: background-color .3s ease, color .3s ease; }

/* ---- UI Harmonizada ---- */
.card {
  background-color: var(--color-bg-alt);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 0.75rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

.table-header {
  background-color: var(--color-bg-alt);
  color: var(--color-text);
}
.table-row {
  background-color: var(--color-bg-alt);
  border-color: var(--color-border);
}
.table-zebra tbody tr:nth-child(odd) { background-color: color-mix(in oklab, var(--color-bg-alt) 92%, var(--color-border)); }
.table-zebra tbody tr:hover { background-color: color-mix(in oklab, var(--color-bg-alt) 85%, var(--color-border)); }

.input {
  background-color: var(--color-bg-alt);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  border-radius: 0.5rem;
  min-height: 2.25rem;
  padding: 0.5rem 0.75rem;
}
.input::placeholder { color: color-mix(in oklab, var(--color-text) 50%, #aaa); }
.input:focus { outline: 2px solid var(--color-accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-accent) 30%, transparent); }
.input:focus-visible { outline-width: 3px; }

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 700;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  border: 1px solid var(--color-border);
  transition: transform .06s ease, box-shadow .2s ease, background-color .2s ease;
  cursor: pointer;
}
.btn:focus-visible { outline: 3px solid var(--color-accent); outline-offset: 2px; }
.btn-accent {
  background-color: var(--color-accent);
  color: white;
  border-color: var(--color-accent);
}
.btn-accent:hover { background-color: var(--color-accent-alt); box-shadow: 0 6px 16px color-mix(in oklab, var(--color-accent) 25%, transparent); }
.btn-accent:active { transform: translateY(1px); }
.btn-ghost {
  background-color: transparent;
  color: var(--color-text);
}

/* Pills/tabs ativos com vermelho suave e texto nítido */
.pill-active {
  background-color: color-mix(in oklab, var(--color-accent) 18%, #fff);
  color: #111827;
  border: 1px solid color-mix(in oklab, var(--color-accent) 35%, var(--color-border));
  box-shadow: 0 3px 10px color-mix(in oklab, var(--color-accent) 20%, transparent);
}

/* Ícones de ação com esquema acessível */
.icon-blue { color: #2563eb; }
.icon-indigo { color: #4f46e5; }
.icon-yellow { color: #ca8a04; }
.icon-red { color: var(--danger); }

/* Header premium com borda inferior sutil */
.header-premium {
  border-bottom: 1px solid var(--color-border);
  backdrop-filter: saturate(1.2) blur(2px);
}

/* Acessibilidade tipográfica básica */
html {
  line-height: 1.5;
}
.accessible-heading {
  color: #0b1220;
  font-weight: 800;
  letter-spacing: 0.01em;
}
:root[data-theme='dark'] .accessible-heading {
  color: #f9fafb;
}
.high-contrast-text {
  color: #0b1220;
}
:root[data-theme='dark'] .high-contrast-text {
  color: #f9fafb;
}
.brand-subtle {
  color: #9ca3af; /* Gray 400 para o subtítulo leve no header */
}

/* Switch de tema acessível */
.theme-switch {
  position: relative;
  display: inline-block;
  width: 52px;
  height: 28px;
}
.theme-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.theme-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #d1d5db;
  transition: .3s;
  border-radius: 28px;
}
.theme-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .3s;
  border-radius: 50%;
}
input:checked + .theme-slider {
  background-color: var(--color-accent);
}
input:checked + .theme-slider:before {
  transform: translateX(24px);
}
.theme-slider:hover {
  background-color: #9ca3af;
}
input:checked + .theme-slider:hover {
  background-color: var(--color-accent-alt);
}
.theme-switch input:focus-visible + .theme-slider {
  outline: 3px solid var(--color-accent);
  outline-offset: 2px;
}

/* Scroll horizontal com sombra indicadora em mobile */
.shadow-inner-x {
  background:
    /* Sombra esquerda */
    linear-gradient(to right, var(--color-bg-alt) 30%, rgba(255, 255, 255, 0)),
    linear-gradient(to right, rgba(0, 0, 0, 0.05), rgba(255, 255, 255, 0) 3%),
    /* Sombra direita */
    linear-gradient(to left, var(--color-bg-alt) 30%, rgba(255, 255, 255, 0)),
    linear-gradient(to left, rgba(0, 0, 0, 0.05), rgba(255, 255, 255, 0) 3%);
  background-position: left center, left center, right center, right center;
  background-repeat: no-repeat;
  background-color: var(--color-bg-alt);
  background-size: 30px 100%, 6px 100%, 30px 100%, 6px 100%;
  background-attachment: local, scroll, local, scroll;
}

:root[data-theme='dark'] .shadow-inner-x {
  background:
    linear-gradient(to right, var(--color-bg-alt) 30%, rgba(0, 0, 0, 0)),
    linear-gradient(to right, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0) 3%),
    linear-gradient(to left, var(--color-bg-alt) 30%, rgba(0, 0, 0, 0)),
    linear-gradient(to left, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0) 3%);
  background-position: left center, left center, right center, right center;
  background-repeat: no-repeat;
  background-color: var(--color-bg-alt);
  background-size: 30px 100%, 6px 100%, 30px 100%, 6px 100%;
  background-attachment: local, scroll, local, scroll;
}

/* Melhorias para dispositivos móveis */
@media (max-width: 640px) {
  /* Reduzir tamanhos de fonte em telas muito pequenas */
  html {
    font-size: 14px;
  }
  
  /* Melhorar área de toque em botões */
  .btn, button {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Otimizar tabelas em mobile */
  table {
    font-size: 0.875rem;
  }
}

/* Melhorar performance com will-change */
.theme-slider,
.btn,
.pill-active {
  will-change: transform, background-color;
}

/* Suporte a modo de alto contraste */
@media (prefers-contrast: high) {
  .btn {
    border-width: 2px;
  }
  
  .card {
    border-width: 2px;
  }
  
  :root[data-theme='light'] {
    --color-text: #000000;
    --color-border: #000000;
  }
}

/* Reduzir movimento para quem prefere */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Ocultar scrollbar mantendo funcionalidade */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;     /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}
